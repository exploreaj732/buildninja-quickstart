name: Ruby_RSpec_Build
description: Ruby application with RSpec tests
version: 1.0

settings:
  vcs-steps:
    - key: vcs_git
      name: Checkout Repository
      disabled: false
      args:
        authType: anonymous
        branch: main
        url: https://github.com/abheekm/Ruby_App.git
      argsProtected: {}

  build-steps:
    - key: runner_cmd
      name: Bundle Install
      disabled: false
      workDir: ""
      args:
        commands: bundle install
      argsProtected: {}

    - key: runner_cmd
      name: Install RSpec
      disabled: false
      workDir: ""
      args:
        commands: gem install rspec
        continueOnError: false
      argsProtected: {}

    - key: runner_cmd
      name: Install Unit Gem
      disabled: false
      workDir: ""
      args:
        commands: gem install unit
        continueOnError: false
      argsProtected: {}

    - key: runner_cmd
      name: Run Tests
      disabled: false
      workDir: ""
      args:
        commands: rspec ./spec/calculator_spec.rb
        continueOnError: false
      argsProtected: {}

  artifacts:
    - name: Build Output
      condition: buildSucceeds
      paths:
        - spec
